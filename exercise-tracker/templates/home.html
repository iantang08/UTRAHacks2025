{% extends "base.html" %}

{% block content %}
<div class="min-h-screen flex flex-col items-center justify-center">
    <h1 class="text-3xl font-bold mb-8">Exercise Tracker</h1>
    <div class="mb-4">
        <input type="text" id="newExercise" class="border rounded px-2 py-1 mr-2 text-black" placeholder="New exercise">
        <button onclick="addExercise()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-1 px-2 rounded">
            Add Exercise
        </button>
    </div>
    <p id="error" class="text-red-500 mb-4 hidden"></p>
    <ul id="exerciseList" class="space-y-2">
        {% for exercise in exercises %}
        <li class="flex items-center">
            <a href="{{ url_for('exercise', name=exercise) }}" class="bg-green-600 hover:bg-green-700 text-white font-bold py-1 px-2 rounded mr-2">
                {{ exercise }}
            </a>
            <button onclick="removeExercise('{{ exercise }}')" class="bg-red-600 hover:bg-red-700 text-white font-bold py-1 px-2 rounded">
                Remove
            </button>
        </li>
        {% endfor %}
    </ul>
</div>
{% endblock %}

{% block scripts %}
<script>
function addExercise() {
    const newExercise = document.getElementById('newExercise').value.trim();
    if (newExercise) {
        axios.post('/api/exercises', { exercise: newExercise })
            .then(response => {
                location.reload();
            })
            .catch(error => {
                document.getElementById('error').textContent = error.response.data.message;
                document.getElementById('error').classList.remove('hidden');
            });
    }
}

function removeExercise(exercise) {
    axios.delete(`/api/exercises/${exercise}`)
        .then(response => {
            location.reload();
        })
        .catch(error => {
            console.error('Error:', error);
        });
}
</script>
{% endblock %}

